{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>{{ project.nome }}</h2>
  <p>{{ project.descricao }}</p>
  <p><strong>Participantes:</strong>
    {% for u in project.participantes.all %}
      {{ u.get_full_name }}{% if not forloop.last %}, {% endif %}
    {% empty %}
      Nenhum participante.
    {% endfor %}
  </p>
  <a class="btn btn-secondary" href="{% url 'projetos:project-update' project.pk %}">Editar</a>
  <a class="btn btn-danger" href="{% url 'projetos:project-delete' project.pk %}">Deletar</a>
  <hr>
  <h4>Tarefas do projeto</h4>
  <a class="btn btn-success" href="{% url 'tarefas:task-create' %}?project={{ project.pk }}">Criar tarefa neste projeto</a>
  <div class="mt-3">
    {% comment %} Lista de tarefas será obtida via app 'tarefas' (relacionamento) {% endcomment %}
    {% for t in project.tarefa_set.all %}
      <div class="card mb-2">
        <div class="card-body">
          <h5><a href="{% url 'tarefas:task-detail' t.pk %}">{{ t.titulo }}</a></h5>
          <p>Status: {{ t.get_status_display }} — Prazo: {{ t.prazo|date:"d/m/Y" }}</p>
        </div>
      </div>
    {% empty %}
      <p>Sem tarefas.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
